{"version":3,"sources":["article.js"],"names":[],"mappings":"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","file":"article-compiled.js","sourcesContent":["/**\n * Created by lyc on 17-7-11.\n */\nimport axios from 'axios'\nimport qs from 'querystring'\nimport {typeUtil} from '@/utils/typeUtil'\nimport {dateUtil} from '@/utils/dateUtil'\nimport {utils} from '@/utils/utils'\nimport {BASE_URL} from './common'\nlet base = BASE_URL\n\nlet AUTH_TOKEN = sessionStorage.getItem('access-user')\naxios.defaults.headers.common['Authorization'] = AUTH_TOKEN\n/**\n * 获取去重后的文章列表 POST /es/deDuplicationSearch\n * @param params\n */\nexport const getDeduplicationArticles = params => {\n  return axios.post(`${base}/es/deDuplicationSearch`, params).then(res => {\n    let {displayConfig} = params\n    let {data} = res\n    let renderData = []\n    if (data.content.length > 0) {\n      data.content.forEach(function (item) {\n        renderData.push(handlerArticleItem(item, displayConfig))\n      })\n    }\n    data.content = renderData\n\n    return data\n  })\n}\n/**\n * 获取未去重的文章列表 POST /es/findPageByMustShouldDateInType\n * @param params\n */\nexport const getArticles = params => {\n  return axios.post(`${base}/es/findPageByMustShouldDateInType`, params).then(res => {\n    let {displayConfig} = params\n    let {data} = res\n    let renderData = []\n    if (data.content.length > 0) {\n      data.content.forEach(function (item) {\n        renderData.push(handlerArticleItem(item, displayConfig))\n      })\n    }\n    data.content = renderData\n\n    return data\n  })\n}\n\n/**\n * 处理文章结果\n * @param item\n * @param displayConfig\n * @returns {*}\n */\nfunction handlerArticleItem(item, displayConfig) {\n  displayConfig = displayConfig || {}\n  let {sourceLength = 6, titleLength = 15, heightLightWords} = displayConfig\n  item.type = item.type.toLowerCase()\n  item.nlp.sentiment.label = typeUtil.sentimentType(item.nlp.sentiment.label)\n  if (item.type === 'weibo') {\n    item.title = item.content\n    item.source = (item.author !== undefined && item.author !== null) ? item.author : '未知'\n    item.dev = (item.dev !== undefined && item.dev !== null && item.dev !== '') ? item.dev : '未知'\n  } else {\n    item.source = (item.source !== undefined && item.source !== null) ? item.source : (item.author !== undefined && item.author !== null) ? item.author : '未知'\n  }\n  if (item.type === 'bbs') {\n    item.title = item.title && item.title.length > 0 ? item.title : item.content.substring(0, 50)\n  }\n  item.collected = false // set the default value for collection.\n  item.pubTime = dateUtil.formatDate(new Date(item.pubTime), 'yyyy/MM/dd')\n  if (item.source.length > sourceLength) {\n    item.source = item.source.substring(0, sourceLength - 1) + '...'\n  }\n  item.title = utils.heightLightKeywords(item.title, titleLength, '...', heightLightWords)\n  item.content = utils.heightLightKeywords(item.content, 180, '...', heightLightWords)\n\n  return item\n}\n\n/**\n * 统计查询接口 POST /es/filterAndGroupBy\n * 专题的预估量也是调用该接口\n * @param params\n */\nexport const getFilterAndGroupBy = params => {\n  return axios.post(`${base}/es/filterAndGroupBy`, params).then(res => res.data)\n}\n\n/**\n * 统计查询时间趋势接口 POST /es/filterAndGroupByTime\n * @param params\n * @param gapParams\n */\nexport const getFilterAndGroupByTime = (params, gapParams) => {\n  return axios.post(`${base}/es/filterAndGroupByTime?` + qs.stringify(gapParams), params).then(res => res.data)\n}\n\n/**\n * add article to collections\n * @param params\n */\nexport const addTOCollection = params => {\n  return axios.get(`${base}/collect/saveCollect2ES.json`, {params: params}).then(res => res.data)\n}\n\n/**\n * delete article from the collections\n * @param params\n */\nexport const deleteFromCollection = params => {\n  return axios.get(`${base}/collect/deleteCollectedInOid.json`, {params: params}).then(res => res.data)\n}\n\n/**\n * get the article in collections or nor by article id.\n * @param params\n */\nexport const hasExitInCollections = params => {\n  return axios.get(`${base}/collect/hasCollected.json`, {params: params}).then(res => res.data)\n}\n\n/**\n * 根据条件统计文章的关键词 POST /es/hotWords\n * @param params\n */\nexport const getHotWords = params => {\n  return axios.post(`${base}/es/hotWords`, params).then(res => res.data)\n}\n"]}